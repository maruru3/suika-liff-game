# Unity-LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒª é€£æºã‚·ã‚¹ãƒ†ãƒ ï¼ˆ2025å¹´ç‰ˆï¼‰

Unity WebGLã‚²ãƒ¼ãƒ ã¨LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªã‚’çµ±åˆã™ã‚‹ãŸã‚ã®å®Œå…¨ãªã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
VSCode + Claude Codeç’°å¢ƒã§é–‹ç™ºã•ã‚Œã¦ã„ã¾ã™ã€‚

> **2025å¹´æœ€æ–°ç‰ˆ**: LIFFã¯LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªã«çµ±åˆã•ã‚Œã¾ã—ãŸã€‚ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯æœ€æ–°ã®æ–¹å¼ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚
> ã‚³ãƒ¼ãƒ‰å´ã¯å¾“æ¥ã®LIFF SDK v2ã‚’ãã®ã¾ã¾ä½¿ç”¨ã§ãã¾ã™ã€‚

## ğŸ“‹ ç›®æ¬¡

- [æ¦‚è¦](#æ¦‚è¦)
- [ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ](#ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ)
- [ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](#ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—)
- [ä½¿ã„æ–¹](#ä½¿ã„æ–¹)
- [API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](#apiãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)
- [ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰](#ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰)
- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°](#ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°)

## ğŸ¯ æ¦‚è¦

ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™:

- âœ… Unity WebGL â†” LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªé–“ã®åŒæ–¹å‘é€šä¿¡
- âœ… LINEãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—
- âœ… ã‚¹ã‚³ã‚¢ãƒ»çµæœã®LINEå…±æœ‰æ©Ÿèƒ½
- âœ… ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã§ã®ãƒ‡ãƒ¼ã‚¿ä¿å­˜/èª­ã¿è¾¼ã¿
- âœ… QRã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³æ©Ÿèƒ½
- âœ… å¤–éƒ¨ãƒªãƒ³ã‚¯é–‹ãæ©Ÿèƒ½
- âœ… Unity Editor ã§ã®å‹•ä½œã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- âœ¨ å¤–éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶å¯¾å¿œï¼ˆ2025å¹´10æœˆã€œï¼‰

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LINE Platform               â”‚
â”‚  (ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã€å…±æœ‰ã€ã‚¹ã‚­ãƒ£ãƒ³)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      LIFF SDK (JavaScript)          â”‚
â”‚  (LINE Front-end Framework)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Unity-LIFF Bridge (JavaScript)    â”‚
â”‚  - unity-liff-bridge.js             â”‚
â”‚  - ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†                      â”‚
â”‚  - ãƒ‡ãƒ¼ã‚¿å¤‰æ›                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Unity WebGL (C#)                â”‚
â”‚  - LIFFBridge.cs                    â”‚
â”‚  - GameManager.cs                   â”‚
â”‚  - Your Game Logic                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ã¾ã™:

```
YourProject/
â”œâ”€â”€ Assets/
â”‚   â””â”€â”€ Scripts/
â”‚       â”œâ”€â”€ LIFFBridge.cs          # Unityå´Bridge
â”‚       â””â”€â”€ GameManager.cs         # ã‚µãƒ³ãƒ—ãƒ«ã‚²ãƒ¼ãƒ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
â”œâ”€â”€ WebGLTemplates/               # Unity WebGLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
â”‚   â””â”€â”€ LIFFTemplate/
â”‚       â”œâ”€â”€ index.html            # unity-liff-template.htmlã‚’ãƒªãƒãƒ¼ãƒ 
â”‚       â””â”€â”€ unity-liff-bridge.js  # JavaScript Bridge
â””â”€â”€ Build/                        # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›å…ˆ
```

### 2. Unity ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š

#### 2.1 WebGL ãƒ“ãƒ«ãƒ‰è¨­å®š

1. **File > Build Settings**
2. Platform: **WebGL** ã‚’é¸æŠ
3. **Player Settings** ã‚’é–‹ã
4. **Publishing Settings**:
   - Compression Format: **Disabled** ã¾ãŸã¯ **Gzip**
   - Decompression Fallback: ãƒã‚§ãƒƒã‚¯

#### 2.2 WebGL ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­å®š

1. `Assets/WebGLTemplates/LIFFTemplate/` ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ
2. `unity-liff-template.html` ã‚’ `index.html` ã«ãƒªãƒãƒ¼ãƒ ã—ã¦é…ç½®
3. `unity-liff-bridge.js` ã‚’åŒã˜ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®
4. **Player Settings > Resolution and Presentation**:
   - WebGL Template: **LIFFTemplate** ã‚’é¸æŠ

#### 2.3 LIFFBridge GameObjectä½œæˆ

1. **Hierarchy** ã§å³ã‚¯ãƒªãƒƒã‚¯ > **Create Empty**
2. åå‰ã‚’ `LIFFBridge` ã«å¤‰æ›´ï¼ˆ**é‡è¦**: ã“ã®åå‰ã¯å›ºå®šï¼‰
3. `LIFFBridge.cs` ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ã‚¢ã‚¿ãƒƒãƒ
4. Inspector ã§ LIFF ID ã‚’è¨­å®š

### 3. LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªè¨­å®š

#### 3.1 LINE Developersè¨­å®š

1. [LINE Developers Console](https://developers.line.biz/console/)ã«ãƒ­ã‚°ã‚¤ãƒ³
2. **LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªãƒãƒ£ãƒãƒ«** ã‚’ä½œæˆ
   - ãƒãƒ£ãƒãƒ«ã‚¿ã‚¤ãƒ—: **ã€ŒLINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªã€** ã‚’é¸æŠ
3. **LIFF ã‚¢ãƒ—ãƒª** ã‚’è¿½åŠ ï¼ˆLIFFã‚¿ãƒ–ã‹ã‚‰ï¼‰
4. ä»¥ä¸‹ã®è¨­å®š:
   - **Size**: `Full`ï¼ˆãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ï¼‰
   - **Endpoint URL**: WebGLãƒ“ãƒ«ãƒ‰ã‚’ãƒ›ã‚¹ãƒˆã™ã‚‹URLï¼ˆHTTPSå¿…é ˆï¼‰
   - **Scopes**: `profile`, `openid`, `chat_message.write`
   - **Scan QR**: `On`ï¼ˆQRã‚¹ã‚­ãƒ£ãƒ³ã‚’ä½¿ã†å ´åˆï¼‰

> **è©³ã—ã„æ‰‹é †**: [MINIAPP_SETUP_GUIDE.md](MINIAPP_SETUP_GUIDE.md) ã‚’å‚ç…§

#### 3.2 LIFF IDè¨­å®š

å–å¾—ã—ãŸLIFF IDã‚’ä»¥ä¸‹ã®ç®‡æ‰€ã«è¨­å®š:

**è‡ªå‹•è¨­å®šï¼ˆæ¨å¥¨ï¼‰:**
```bash
python setup_liff_id.py YOUR-LIFF-ID
```

**æ‰‹å‹•è¨­å®š:**
- `LIFFBridge.cs`: `liffId` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- `unity-liff-template.html`: `CONFIG.liffId`

### 4. ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤

#### 4.1 Unityãƒ“ãƒ«ãƒ‰

1. **File > Build Settings**
2. **Build** ã‚’ã‚¯ãƒªãƒƒã‚¯
3. å‡ºåŠ›å…ˆ: `Build` ãƒ•ã‚©ãƒ«ãƒ€

#### 4.2 ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆç¢ºèª

ãƒ“ãƒ«ãƒ‰å¾Œã€ä»¥ä¸‹ã®æ§‹æˆã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª:

```
Build/
â”œâ”€â”€ index.html               # ãƒ¡ã‚¤ãƒ³HTML
â”œâ”€â”€ unity-liff-bridge.js     # Bridge
â”œâ”€â”€ Build/
â”‚   â”œâ”€â”€ UnityBuild.loader.js
â”‚   â”œâ”€â”€ UnityBuild.data
â”‚   â”œâ”€â”€ UnityBuild.framework.js
â”‚   â””â”€â”€ UnityBuild.wasm
â””â”€â”€ TemplateData/           # Unityç”Ÿæˆãƒ•ã‚¡ã‚¤ãƒ«
```

#### 4.3 HTTPS ã‚µãƒ¼ãƒãƒ¼ã§ãƒ›ã‚¹ãƒˆ

LIFFã¯HTTPSå¿…é ˆã§ã™ã€‚ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®æ–¹æ³•ã§ãƒ›ã‚¹ãƒˆ:

**æ–¹æ³•1: Python HTTPS ã‚µãƒ¼ãƒãƒ¼ (é–‹ç™ºç”¨)**

```bash
# æ—¢å­˜ã®https_server.pyã‚’ä½¿ç”¨
python https_server.py
```

**æ–¹æ³•2: ngrok (å¤–éƒ¨ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½)**

```bash
cd Build
npx http-server -p 8080
# åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§
ngrok http 8080
```

**æ–¹æ³•3: æœ¬ç•ªç’°å¢ƒ (æ¨å¥¨)**

- GitHub Pages (HTTPSè‡ªå‹•)
- Netlify
- Vercel
- Firebase Hosting

## ğŸ“– ä½¿ã„æ–¹

### Unityå´ (C#)

#### åŸºæœ¬çš„ãªä½¿ã„æ–¹

```csharp
using UnityEngine;

public class MyGame : MonoBehaviour
{
    private LIFFBridge liffBridge;

    void Start()
    {
        // LIFFBridgeå–å¾—
        liffBridge = FindObjectOfType<LIFFBridge>();

        // ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²
        liffBridge.OnLiffInitialized += OnLiffReady;
        liffBridge.OnShareSuccess += OnShareSuccess;
    }

    void OnLiffReady(LIFFBridge.UserProfile profile)
    {
        Debug.Log($"ã‚ˆã†ã“ãã€{profile.displayName}ã•ã‚“ï¼");
    }

    public void ShareMyScore(int score)
    {
        liffBridge.ShareGameScore(score, $"{score}ç‚¹ç²å¾—ï¼");
    }

    void OnShareSuccess()
    {
        Debug.Log("å…±æœ‰å®Œäº†ï¼");
    }
}
```

#### ãƒ‡ãƒ¼ã‚¿ä¿å­˜/èª­ã¿è¾¼ã¿

```csharp
// ä¿å­˜
[System.Serializable]
public class SaveData
{
    public int level;
    public int score;
}

SaveData data = new SaveData { level = 5, score = 1000 };
string json = JsonUtility.ToJson(data);
liffBridge.SaveData("mySave", json);

// èª­ã¿è¾¼ã¿
string json = liffBridge.LoadData("mySave");
SaveData data = JsonUtility.FromJson<SaveData>(json);
```

#### QRã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³

```csharp
liffBridge.OnScanSuccess += (code) => {
    Debug.Log($"ã‚¹ã‚­ãƒ£ãƒ³çµæœ: {code}");
};

liffBridge.StartScan();
```

### JavaScriptå´

JavaScriptå´ã‹ã‚‰ç›´æ¥æ“ä½œã™ã‚‹å ´åˆ:

```javascript
// LIFFåˆæœŸåŒ–
await window.unityLiffBridge.initializeLIFF('YOUR-LIFF-ID');

// Unityå´ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
window.unityLiffBridge.sendToUnity('OnCustomEvent', 'Hello Unity!');

// ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—
const profile = window.unityLiffBridge.getUserProfile();
console.log(profile);
```

## ğŸ”Œ API ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹

### LIFFBridge (C#)

#### ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£

| ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ | å‹ | èª¬æ˜ |
|-----------|-----|------|
| `isLiffInitialized` | bool | LIFFåˆæœŸåŒ–æ¸ˆã¿ã‹ |
| `isBridgeReady` | bool | Bridgeæº–å‚™å®Œäº†ã‹ |
| `userId` | string | LINEãƒ¦ãƒ¼ã‚¶ãƒ¼ID |
| `displayName` | string | LINEãƒ¦ãƒ¼ã‚¶ãƒ¼å |
| `pictureUrl` | string | LINEã‚¢ãƒã‚¿ãƒ¼URL |

#### ãƒ¡ã‚½ãƒƒãƒ‰

##### InitializeLIFFBridge()
LIFF Bridgeã‚’åˆæœŸåŒ–ã—ã¾ã™ï¼ˆè‡ªå‹•çš„ã«Start()ã§å‘¼ã°ã‚Œã¾ã™ï¼‰

```csharp
public void InitializeLIFFBridge()
```

##### ShareGameScore(score, message)
ã‚¹ã‚³ã‚¢ã‚’LINEã§å…±æœ‰ã—ã¾ã™

```csharp
public void ShareGameScore(int score, string customMessage = "")
```

**Parameters:**
- `score`: å…±æœ‰ã™ã‚‹ã‚¹ã‚³ã‚¢
- `customMessage`: ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆçœç•¥å¯ï¼‰

##### SaveData(key, jsonData)
ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã™

```csharp
public void SaveData(string key, string jsonData)
```

**Parameters:**
- `key`: ä¿å­˜ã‚­ãƒ¼
- `jsonData`: JSONå½¢å¼ã®ãƒ‡ãƒ¼ã‚¿

##### LoadData(key)
ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™

```csharp
public string LoadData(string key)
```

**Returns:** JSONæ–‡å­—åˆ—ï¼ˆãƒ‡ãƒ¼ã‚¿ãŒãªã„å ´åˆã¯ç©ºæ–‡å­—åˆ—ï¼‰

##### GetProfile()
ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å–å¾—ã—ã¾ã™

```csharp
public UserProfile GetProfile()
```

**Returns:** `UserProfile` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

##### GetContext()
LIFFç’°å¢ƒæƒ…å ±ã‚’å–å¾—ã—ã¾ã™

```csharp
public LiffContext GetContext()
```

**Returns:** `LiffContext` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

##### Close()
LIFFã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‰ã˜ã¾ã™

```csharp
public void Close()
```

##### OpenLink(url)
å¤–éƒ¨ãƒªãƒ³ã‚¯ã‚’é–‹ãã¾ã™

```csharp
public void OpenLink(string url)
```

##### StartScan()
QRã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³ã‚’é–‹å§‹ã—ã¾ã™

```csharp
public void StartScan()
```

#### ã‚¤ãƒ™ãƒ³ãƒˆ

| ã‚¤ãƒ™ãƒ³ãƒˆ | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ | èª¬æ˜ |
|---------|-----------|------|
| `OnLiffInitialized` | UserProfile | LIFFåˆæœŸåŒ–å®Œäº†æ™‚ |
| `OnBridgeReady` | - | Bridgeæº–å‚™å®Œäº†æ™‚ |
| `OnLiffError` | string | LIFFã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæ™‚ |
| `OnShareSuccess` | - | å…±æœ‰æˆåŠŸæ™‚ |
| `OnShareError` | string | å…±æœ‰å¤±æ•—æ™‚ |
| `OnSaveSuccess` | string | ä¿å­˜æˆåŠŸæ™‚ |
| `OnSaveError` | string | ä¿å­˜å¤±æ•—æ™‚ |
| `OnLoadComplete` | string | èª­ã¿è¾¼ã¿å®Œäº†æ™‚ |
| `OnLoadError` | string | èª­ã¿è¾¼ã¿å¤±æ•—æ™‚ |
| `OnScanSuccess` | string | ã‚¹ã‚­ãƒ£ãƒ³æˆåŠŸæ™‚ |
| `OnScanError` | string | ã‚¹ã‚­ãƒ£ãƒ³å¤±æ•—æ™‚ |

### UnityLiffBridge (JavaScript)

#### ãƒ¡ã‚½ãƒƒãƒ‰

##### initializeLIFF(liffId)
LIFF SDKã‚’åˆæœŸåŒ–ã—ã¾ã™

```javascript
await window.unityLiffBridge.initializeLIFF('YOUR-LIFF-ID')
```

##### setUnityInstance(instance)
Unity WebGLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç™»éŒ²ã—ã¾ã™

```javascript
window.unityLiffBridge.setUnityInstance(unityInstance)
```

##### sendToUnity(methodName, message)
Unityå´ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã—ã¾ã™

```javascript
window.unityLiffBridge.sendToUnity('OnCustomEvent', 'data')
```

##### shareScore(score, message)
ã‚¹ã‚³ã‚¢ã‚’å…±æœ‰ã—ã¾ã™

```javascript
await window.unityLiffBridge.shareScore(1000, 'ãƒã‚¤ã‚¹ã‚³ã‚¢é”æˆï¼')
```

##### saveGameData(key, data)
ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¾ã™

```javascript
window.unityLiffBridge.saveGameData('save1', {level: 5})
```

##### loadGameData(key)
ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã™

```javascript
const data = window.unityLiffBridge.loadGameData('save1')
```

## ğŸ’¡ ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

### ä¾‹1: ã‚¹ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 

```csharp
public class ScoreManager : MonoBehaviour
{
    private LIFFBridge liffBridge;
    private int currentScore = 0;

    void Start()
    {
        liffBridge = FindObjectOfType<LIFFBridge>();
        liffBridge.OnBridgeReady += LoadSavedScore;
    }

    public void AddScore(int points)
    {
        currentScore += points;

        // è‡ªå‹•ä¿å­˜
        SaveScore();
    }

    void SaveScore()
    {
        var data = new { score = currentScore };
        liffBridge.SaveData("score", JsonUtility.ToJson(data));
    }

    void LoadSavedScore()
    {
        string json = liffBridge.LoadData("score");
        if (!string.IsNullOrEmpty(json))
        {
            var data = JsonUtility.FromJson<ScoreData>(json);
            currentScore = data.score;
        }
    }

    [System.Serializable]
    class ScoreData { public int score; }
}
```

### ä¾‹2: ãƒ©ãƒ³ã‚­ãƒ³ã‚°å…±æœ‰

```csharp
public class RankingSystem : MonoBehaviour
{
    private LIFFBridge liffBridge;

    void Start()
    {
        liffBridge = FindObjectOfType<LIFFBridge>();
    }

    public void ShareRanking(int rank, int score)
    {
        string message = $"ğŸ† ãƒ©ãƒ³ã‚­ãƒ³ã‚° {rank}ä½ï¼\n" +
                        $"ğŸ“Š ã‚¹ã‚³ã‚¢: {score}ç‚¹\n" +
                        $"ä¸€ç·’ã«ãƒ—ãƒ¬ã‚¤ã—ã‚ˆã†ï¼";

        liffBridge.ShareGameScore(score, message);
    }
}
```

### ä¾‹3: ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ‹›å¾…

```csharp
public class MultiplayerManager : MonoBehaviour
{
    private LIFFBridge liffBridge;
    private string roomId;

    public void CreateRoom()
    {
        roomId = System.Guid.NewGuid().ToString();
        InviteFriends();
    }

    void InviteFriends()
    {
        string message = $"ğŸ® ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ã«å‚åŠ ã—ã‚ˆã†ï¼\n" +
                        $"ãƒ«ãƒ¼ãƒ ID: {roomId}";

        liffBridge.ShareGameScore(0, message);
    }
}
```

## ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. LIFFãŒåˆæœŸåŒ–ã•ã‚Œãªã„

**ç—‡çŠ¶:** `LIFFåˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼`ãŒã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã•ã‚Œã‚‹

**è§£æ±ºç­–:**
- LIFF IDãŒæ­£ã—ã„ã‹ç¢ºèª
- HTTPSã§å‹•ä½œã—ã¦ã„ã‚‹ã‹ç¢ºèª
- LINEã‚¢ãƒ—ãƒªå†…ã¾ãŸã¯å¤–éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ã„ã‚‹ã‹ç¢ºèª

#### 2. Unityå´ã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã§ããªã„

**ç—‡çŠ¶:** JavaScriptã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒUnityã«å±Šã‹ãªã„

**è§£æ±ºç­–:**
- GameObjectã®åå‰ãŒ `LIFFBridge` ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªï¼ˆå¤§æ–‡å­—å°æ–‡å­—ã‚‚ä¸€è‡´ï¼‰
- `LIFFBridge.cs`ãŒGameObjectã«ã‚¢ã‚¿ãƒƒãƒã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ãŒãªã„ã‹ç¢ºèª

#### 3. å…±æœ‰æ©Ÿèƒ½ãŒå‹•ä½œã—ãªã„

**ç—‡çŠ¶:** `shareTargetPicker APIãŒåˆ©ç”¨ã§ãã¾ã›ã‚“`

**è§£æ±ºç­–:**
- LINEã‚¢ãƒ—ãƒªå†…ã§é–‹ã„ã¦ã„ã‚‹ã‹ç¢ºèªï¼ˆå¤–éƒ¨ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯ä½¿ãˆãªã„ï¼‰
- LIFFè¨­å®šã§scopeã« `chat_message.write` ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### 4. WebGLãƒ“ãƒ«ãƒ‰ãŒèª­ã¿è¾¼ã¾ã‚Œãªã„

**ç—‡çŠ¶:** ç™½ã„ç”»é¢ã®ã¾ã¾

**è§£æ±ºç­–:**
- ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
- ãƒ“ãƒ«ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ãŒæ­£ã—ã„ã‹ç¢ºèª
- CORSã‚¨ãƒ©ãƒ¼ã®å ´åˆã€ã‚µãƒ¼ãƒãƒ¼è¨­å®šã‚’ç¢ºèª

#### 5. ã‚¨ãƒ‡ã‚£ã‚¿ã§ãƒ†ã‚¹ãƒˆã—ãŸã„

**ç—‡çŠ¶:** WebGLãƒ“ãƒ«ãƒ‰ã›ãšã«å‹•ä½œç¢ºèªã—ãŸã„

**è§£æ±ºç­–:**
- `#if UNITY_EDITOR` ãƒ–ãƒ­ãƒƒã‚¯å†…ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ãŒå‹•ä½œã—ã¾ã™
- `SimulateLiffInitialized()` ã§æ“¬ä¼¼çš„ãªãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãŒè¨­å®šã•ã‚Œã¾ã™
- PlayerPrefsã§ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ

### ãƒ‡ãƒãƒƒã‚°æ–¹æ³•

#### ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ç¢ºèª

```javascript
// LIFFçŠ¶æ…‹ç¢ºèª
console.log(window.unityLiffBridge.liffInitialized);
console.log(window.unityLiffBridge.userProfile);

// Unity Instanceç¢ºèª
console.log(window.unityLiffBridge.unityInstance);
```

#### Unityå´ãƒ‡ãƒãƒƒã‚°

```csharp
void OnEnable()
{
    liffBridge.OnLiffError += (error) => {
        Debug.LogError($"[LIFF ERROR] {error}");
    };
}
```

## ğŸ“ ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 1. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

å¿…ãšã‚¨ãƒ©ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™»éŒ²ã—ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯:

```csharp
liffBridge.OnLiffError += (error) => {
    ShowErrorDialog($"ã‚¨ãƒ©ãƒ¼: {error}");
};
```

### 2. Bridgeæº–å‚™å¾…æ©Ÿ

Bridgeã®æº–å‚™å®Œäº†ã‚’å¾…ã£ã¦ã‹ã‚‰æ“ä½œ:

```csharp
if (liffBridge.isBridgeReady)
{
    // æ“ä½œå®Ÿè¡Œ
}
else
{
    liffBridge.OnBridgeReady += () => {
        // æº–å‚™å®Œäº†å¾Œã®æ“ä½œ
    };
}
```

### 3. ãƒ‡ãƒ¼ã‚¿åŒæœŸ

é‡è¦ãªãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•ä¿å­˜:

```csharp
void Update()
{
    if (Time.time - lastSaveTime > 60f) // 1åˆ†ã”ã¨
    {
        SaveGameData();
        lastSaveTime = Time.time;
    }
}
```

## ğŸ“ ã•ã‚‰ã«å­¦ã¶

### LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªé–¢é€£
- [LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒª ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.line.biz/ja/docs/line-mini-app/)
- [LIFF APIãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://developers.line.biz/ja/reference/liff/)
- [LINEãƒŸãƒ‹ã‚¢ãƒ—ãƒªçµ±åˆã®ãŠçŸ¥ã‚‰ã›](https://developers.line.biz/ja/news/2025/02/12/line-mini-app/)
- [MINIAPP_SETUP_GUIDE.md](MINIAPP_SETUP_GUIDE.md) - è©³ç´°ãªè¨­å®šã‚¬ã‚¤ãƒ‰

### Unityé–¢é€£
- [Unity WebGL Documentation](https://docs.unity3d.com/Manual/webgl.html)
- [Unity WebGL ã¨ JavaScript ã®é€£æº](https://docs.unity3d.com/Manual/webgl-interactingwithbrowserscripting.html)

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯æ•™è‚²ãƒ»å­¦ç¿’ç›®çš„ã§ä½œæˆã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ¤ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:
1. ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ç¢ºèª
2. ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã¨Unityã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚¨ãƒ©ãƒ¼ã‚’ç¢ºèª
3. LIFFè¨­å®šã‚’å†ç¢ºèª

---

**é–‹ç™ºç’°å¢ƒ:** VSCode + Claude Code + Serena MCP
**æœ€çµ‚æ›´æ–°:** 2025å¹´10æœˆ
